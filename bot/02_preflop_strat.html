<html lang="en">
<head>
<meta charset="UTF-8" />
<title>Poker Bot Preflop Strategy &#8211; Matt Mazur</title>
</head>

<body>
<h1 class="entry-title">Poker Bot Preflop&nbsp;Strategy</h1>

<p> This guy was not only an extremely talented player, but he also possessed a deep analytical ability that helped him understand <em>why</em> he made decisions he made. So with him guiding the strategy, we set out to build a profitable NL200 ($1/$2) six-max poker bot.</p>
<p>As you&#8217;ll see in a minute, he was brilliant. A genius. He knew his stuff inside and out. As I read over the first strategy email he sent me I couldn&#8217;t help but think that we were going to completely destroy the tables.</p>
<p>However, the more we worked, the more he realized how complex it was. It&#8217;s funny: you can teach someone to play decent poker in half an hour so it seems like it shouldn&#8217;t be that hard to teach a computer. After all, you have access to millions hands and more processing power that you could ever need&#8211;how hard could it be?</p>
<p>It&#8217;s pretty hard. If you doubt it, try writing down a winning strategy and giving it to someone who has never played poker before. Have them join a game and tell the person to follow your directions no matter what and never to deviate even when they think it makes sense to do so. One of the things you&#8217;ll quickly discover is that a lot of factors influence your decisions. At least they should. It&#8217;s not just your hole cards and the hand you make that you have to factor in: your position, the stack sizes, the action leading up to that point, the table dynamics, your opponents&#8217; styles, the meta game, and a dozen other factors help you decide what to do. How do you tell a poker bot to make a decision based on all these factors? That&#8217;s the tricky. But if you don&#8217;t, you&#8217;re going to have a tough time building a winning full stack no limit bot.</p>
<p>He understood this well. Instead, he took a hybrid approach: some rules to identify the situation, and then a mostly quantitative approach to decide what action to take from there.</p>
<p>Below is one of his first emails, detailing his proposed preflop strategy. I&#8217;m posting it here because it&#8217;s not going to help anyone build a winning bot and I think a lot of folks will find it interesting. It can be a bit hard to follow at times, but if you&#8217;re a hardcore poker player you&#8217;ll probably get a kick out of it.</p>
<p>###</p>
<h2>Preflop Play</h2>
<p><strong>Defining and recalling factors</strong></p>
<p>A database will be composed giving the values of 4 independent variables for each starting holdem hand. The values of each variable will be recalled when a hand is dealt. These 4 variables will be given names as follows: SE, IO, RIO, and BHF.</p>
<p><strong>Triggered formulas modifying and using the 4 factors</strong></p>
<p>[Each of these formulas trigger every time conditions in italics are met. Variables are “declared” in where lines and apply to the whole code throughout the duration of one hand. “My variables” are extra variables in equations that are subjective and need to be modifiable by me. Stats are usually in words or acronyms in paraenthesis and should be recognizable, and recall a number already calculated and in memory.]</p>
<p>-Variables consisting of solely letters (A, B, C,…, Z), (ZA, ZB, ZC,…, ZZ), or (ZAA, ZAB, ZAC, …, ZZZ) are my variables.</p>
<p>-Variables containing letters YA through YZ are placeholder variables [used to add or subtract value to SE and IO on players’ exit from hands]</p>
<p>-Any time subscript x is used, it is a variable associated with player in x position [6 is utg 1 is BB]. Also, Y(1-6) = Y1 +Y2 +Y3 + Y4 +Y5 +Y6 . [In the actual code, you will probably have to figure out a different system than the subscript system I have here, and may have to write out each equation multiple times, but I leave it up to you how to translate this algorithm code.]</p>
<p><em>When a player raises</em></p>
<p>Where SRx is strength of the raise of the player in x position, defined below</p>
<p>SRx= (positional pfr of raiser)A + (size of the raise in BB)B+(SR(1-6) )ZW<br />
YAx= (-C)(SRx^1.5)<br />
SE=SE+YAx<br />
YBx=D(SRx^1.5)<br />
IO=YBx+IO</p>
<p><em>When a player is the first player to cold call a raise</em></p>
<p>Where CCx is strength of cold the call in x position, defined below</p>
<p>CCx= (positional vpip of caller)E + (% 3 bet preflop of caller)F + (SR(1-6))G<br />
YRx= (CCx)H<br />
IO=IO+YRx<br />
If CCx&gt;I<br />
YCx= (– J)(CCx^1.5)<br />
SE=SE+YCx<br />
If CCx=I or CCx&lt;I<br />
YDx= K(CCx^1.5)<br />
SE=SE+YDx</p>
<p><em>When a player over calls a raise [calls a raise that has been called by another player]</em></p>
<p>Where CC is strength of the cold call in x position, defined below</p>
<p>CCx= (positional vpip of this caller)E + (% 3 bet preflop of this caller)F + (SR(1-6))G – ZX(CC(1-6))<br />
YQx= (CCx)H<br />
IO=IO+YQx<br />
If CCx&gt;I<br />
YCx= (– J)(CCx^1.5)<br />
SE=SE+YCx<br />
If CCx=I or CCx&lt;I<br />
YDx= K(CCx^1.5)<br />
SE=SE+YDx</p>
<p><em>When a player open limps [limps when everyone who has already acted has folded]</em></p>
<p>Where SL is strength of limper, defined below<br />
SLx=(positional vpip of limper)L+(positional pfr of limper)M<br />
YE=(SLx)N<br />
IO=IO+YEx<br />
YFx=(SLx)O<br />
SE=YFx+SE<br />
If SLx&gt;I<br />
YGx= (–P)(SLx^1.5)<br />
SE=YGx+SE<br />
If SLx=I or SLx&lt;I<br />
YHx= Q(SLx^1.5)<br />
SE=SE+YHx</p>
<p><em>When a player overlimps [limps after a player has already limped]<br />
</em></p>
<p>Where SOL is strength of overlimper, defined below<br />
SOLx=(positional vpip of limper)L+(positional pfr of limper)M+R(SLx)<br />
YJ=(SOLx)N<br />
IO=YJx+IO<br />
YKx=(SOLx)O<br />
SE=YKx+SE<br />
If SOLx&gt;I<br />
YLx=(–P)(SOLx^1.5)<br />
SE=SE+YLx<br />
If SOLx=I or SOLx&lt;I<br />
YMx= Q(SOLx^1.5)<br />
SE=YMx+SE</p>
<p><em>When we are first to act or all players have folded to us</em></p>
<p>Where BS is blind steal, defined below, and XX is a random integer between 0 and 9</p>
<p>If (the big blind’s fold bb to steal) &gt; .70<br />
BS= ((bb’s fold bb to steal) &#8211; .70)(XX)S=YN<br />
If( the big blind’s fold bb to steal) &lt; .30<br />
BS = (.30 &#8211; .(bb’s fold bb to steal))(XX)T=YO<br />
YP= – (pos VPIP of sb)U + 1 &#8211; .2BS(number of players left to act)<br />
BS=BS+YP</p>
<p><em>Any time a player in x  position folds </em></p>
<p>IO=IO &#8211; .67(YBx+YRx+YQx+YEx+YJx)<br />
SE=SE &#8211; .4(YAx +YCx +YDx +YFx+YGx+YHx+YKx+YLx+YMx)</p>
<p>{</p>
<p><em>Any time it is our first time to act EVALUATE ON EACH PLAYER WHO HAS NOT ACTED, NOT INCLUDING THE BLINDS, redeclaring variables each time</em></p>
<p>Where DCS is degree of calling station, defined below, DL is degree of LAG, defined below, DF is degree of folder, defined below</p>
<p>If (WTSD) &gt; .37 and (Postflop AF) &lt; 1.5 and (VPIP) &gt; .30<br />
DCS=(VPIP &#8211; .15)(2 – (Postflop AF))(WTSD &#8211; .1)V<br />
SE=DCS(W)+SE<br />
IO=DCS(X)+IO<br />
If( WTSD) &gt; .30 and (postflop AF )&gt; 3.5 and (VPIP)&gt; .25<br />
DL=(WTSD)((postflop AF) &#8211; 2)(VPIP &#8211; .12)Y<br />
SE=DL(Z)+SE<br />
IO=DL(ZA)+IO<br />
If WTSD &lt; .19 and Fold flop to cbet &gt; .70<br />
DF=(.24-WTSD)(VPIP)((Fold flop to cbet)-.3)(ZB)<br />
SE=SE+DF(ZC)<br />
BHF=BHF+DF(ZD)</p>
<p><em>Any time it is our first time to act EVALUATE ON EACH PLAYER WHO HAS ALREADY ACTED AND IS STILL IN THE HAND, redeclaring variables each time</em></p>
<p>Where DCS is degree of calling station, defined below, DL is degree of LAG, defined below, DF is degree of folder, defined below<br />
If (WTSD) &gt; .37 and (Postflop AF) &lt; 1.5 and (VPIP) &gt; .30<br />
DCS=(VPIP &#8211; .15)(2 – (Postflop AF))(WTSD &#8211; .1)ZE<br />
SE=DCS(ZF)+SE<br />
IO=DCS(ZG)+IO<br />
If( WTSD) &gt; .30 and (postflop AF )&gt; 3.5 and (VPIP)&gt; .25<br />
DL=(WTSD)((postflop AF) &#8211; 2)(VPIP &#8211; .10)ZH<br />
SE=DL(ZI)+SE<br />
IO=DL(ZJ)+IO<br />
If WTSD &lt; .19 and Fold flop to cbet &gt; .70<br />
DF=(.24-WTSD)(VPIP)((Fold flop to cbet)-.3)(ZK)<br />
SE=SE+DF(ZL)<br />
BHF=BHF+DF(ZM)</p>
<p><em>Any time it is our first time to act EVALUATE ON EACH BLIND WHO HAS NOT ACTED, redeclaring variables each time</em></p>
<p>Where DCS is degree of calling station, defined below, DL is degree of LAG, defined below, DF is degree of folder, defined below</p>
<p>If (WTSD) &gt; .37 and (Postflop AF) &lt; 1.5 and (VPIP) &gt; .30<br />
DCS=(VPIP &#8211; .15)(2 – (Postflop AF))(WTSD &#8211; .1)ZN<br />
SE=DCS(ZO)+SE<br />
IO=DCS(ZP)+IO<br />
If( WTSD) &gt; .30 and (postflop AF )&gt; 3.5 and (VPIP)&gt; .25<br />
DL=(WTSD)((postflop AF) &#8211; 2)(VPIP &#8211; .12)ZQ<br />
SE=DL(ZR)+SE<br />
IO=DL(ZS)+IO<br />
If WTSD &lt; .19 and Fold flop to cbet &gt; .70<br />
DF=(.24-WTSD)(VPIP)((Fold flop to cbet)-.3)(ZT)<br />
SE=SE+DF(ZU)<br />
BHF=BHF+DF(ZV)</p>
<p>}</p>
<p>For the bracketed area, whenever an “if” section is activated, keep track of how much our SE, BHF, and IO values are being modified. When the player who activated the “if” section folds, reverse 2/3 of the change to the IO, SE, or BHF value that was made. [For example, if a player has really fishy stats in the cutoff and adds DCS(W) to our SE, if that player folds preflop, subtract 2/3 DCS(W). Note however that the variables (DCS) and (W)’s values can change by the time he folds, but the 2/3 the actual amount added to SE needs to be subtracted.]</p>
<p><em>Any time there is (dead money) in the pot</em></p>
<p>Define (dead money) as all money players have put into the pot who have folded, any money not attached to a hand [such as in a dead sb when a player posts out of position who was at the table], and any money we have previously put in the pot when it is again our turn to act.</p>
<p>(1+(dead money) / (2(size of the pot)))SE</p>
<p><em>Any time it is our turn to act and we are outside the blinds</em></p>
<p>If it is our 1st time to act XY=1<br />
If we raised our 1st time to act, and it is our second time to act, XY=.5<br />
else XY=0<br />
If (ZY(SE)+ZZ(IO)+ZAA(BHF)+ZAB(BS)ZY- (ZAC)RIO)&gt;ZAD<br />
Raise<br />
If (ZAE(SE)+ZAF(IO)+ZAG(BHF)-ZAH(RIO))&gt;ZAI<br />
Call<br />
Else<br />
Fold</p>
<p><em>Any time it is our turn to act and we are inside the blinds</em></p>
<p>If it is our 1st time to act XY=1<br />
If we raised our 1st time to act, and it is our second time to act, XY=.5<br />
else XY=0<br />
If (ZAJ(SE)+ZAK(IO)+ZAL(BHF)+ZAM(BS)ZY-(ZAO)RIO)&gt;ZAP<br />
Raise<br />
If (ZAQ(SE)+ZAR(IO)+ZAS(BHF)-ZAT(RIO))&gt;ZAU<br />
Call<br />
Else<br />
Fold</p>
<p>[This is the end of the algorithm part I have been working on. What follows is the text I wrote before I started writing the actual algorithms pertaining to preflop stuff I need to turn into algorithms. This is all unedited and unchanged since I started work on the real algorithms, and hence may be incorrect.]</p>
<p>Bet sizing will be based on size of the pot with modifiers. We will raise less in position and more out of position at a constant rate. There will also be a semi-random component based on our SE and IO. Hands that have high IO and/or SE, with small consideration for BHF, will be raised a slightly larger portion of the pot. I envision taking the higher of the 2 values and adding 1/3 of the other, and then adding a reduced BHF. This should scale with a random variable such that hands with the lowest values and latest position are raised to 3bbs 60% of the time, 3.5bbs 26.6% of the time, and 13.3% 4bbs. For hands with our highest value, it should be 4bbs 100%. For hands with average values, say like KJs from mid position, the distribution should be close to even but tilted slightly towards 4bb. Our average 3bet sizes should be about 15% less than the size of the pot in position and 10% more than the size of the pot out of the bb. All these are for 100bbs. Our raise sizes decrease as size of the pot relative to stack sizes decrease. The effect should be about 10% from 50bb to 100bb and 10% more from 100bb to 200bb for similar sized pots.</p>
<p>With some tweaking, this should be able to reproduce the slag style. Our preflop play will become more advanced and correct as we add to and tweak section 1b.</p>
<p>A note on filters: It is important that we play small pairs correctly preflop. Small pairs are unique because their value lies in the 1/9 chance we flop a set. There are some basic rules for this, like we should always call when the bet to us is 1/15 of stacks or better. Of course, a ton of things modify this rule, especially the implied odds of the opponents’ play style. I have hoped we could model correct low pocket pair play preflop without having to add an extra “filter”. There are a number of things like this throughout our play of a hand, special circumstances that should be added to normal logic of play. I will try to write as few filters as possible, trying to reduce everything to its lowest common denominator. I am still unsure if we will be able to model correct low PP play without a filter. In any case, these filters should be the last thing we write.</p>
<p><strong>Section 2</strong></p>
<p>Instead of only future modeling which takes place in Section 1, Section 2 will combine some modeling with basic hand reading and immediate equity calculations.</p>
<p>Section 2 will take over when the size of the bet we are facing is greater than or equal to 20% of effective stacks of the lowest stack player who has called or made that bet, or us if we were to call the bet, or a player who has called another bet (not the bet we are facing) that is 35% of his effective stack and he has not folded yet. It will also take over if we plan to make a raise that would be about 12% stack of a 200bb player, 20% stack of a 100bb player, or 35% stack of a 20bb player who has called the latest raise. (note that later I plan to make this scale with stack sizes in BB as well as %of stack)</p>
<p>We will take the action with the highest expected value (EV).<br />
EV folding is 0<br />
EV calling is (equity)*(size of pot after call)*TIO – (amount to call) – (chance we will have to fold this round*amount to call)<br />
EV raising is (Equity when called)*(size of pot when called)*TIO + (% chance all fold)* (size of the pot with our raise) – (amount costs us to raise) – (EV loss when we have to fold after we raise)</p>
<p>We will assign hand ranges to each relevant (defined later) player in the hand by taking the % of time they perform that action for raising (positional pfr for 1st raises, 3 betting graduated for position for 2nd raises) and using our predefined raising table, and 1/2raise%-call% for players who have called.</p>
</body>
</html>
